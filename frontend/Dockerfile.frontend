FROM node:20-alpine

WORKDIR /app

# Copier les d√©pendances (depuis le contexte frontend/)
COPY package*.json ./
RUN npm ci

# Copier le code source (depuis le contexte frontend/)
COPY src/ ./src/
COPY public/ ./public/
COPY index.html ./
COPY vite.config.js ./

# Build pour production
RUN npm run build

# Installer serve pour servir les fichiers statiques
RUN npm install -g serve

# Exposer le port
EXPOSE 5173

# Servir le frontend
CMD ["serve", "-s", "dist", "-l", "5173"]